function Zam(t,e){this.functions={},this.routes={},this.data=void 0===t?{}:t,this.cycled=e,this.runEngine(),this.idCounter=0}Zam.prototype.runEngine=function(){var t=this,e=function(e){var n,r,o;if(null===e.target.getAttribute("z-link")&&(null===e.target.getAttribute("id")?(e.target.setAttribute("id","a"+t.idCounter),e.target.setAttribute("z-link","a"+t.idCounter),t.idCounter++):e.target.setAttribute("z-link",e.target.getAttribute("id"))),n=document.querySelectorAll("#"+e.target.getAttribute("z-link"))[0],r=n,o=n.innerHTML,e.target.getAttribute("z-pre")){for(var s=e.target.getAttribute("z-pre").trim();-1!==s.indexOf(" ");)t.data[s.slice(0,s.indexOf(" "))](),s=s.slice(s.indexOf(" ")+1);t.data[s](r,e)}if(n.getAttribute("z-data")){if(void 0!==t.data[e.target.getAttribute("z-link")])n.innerHTML=t.data[e.target.getAttribute("z-link")],t.data[e.target.getAttribute("z-link")]=o;else{var a=n.getAttribute("z-data");if(n.hasAttribute("z-append")){(l=document.createElement("div")).innerHTML=t.data[a],n.appendChild(l),r=l}else if(n.hasAttribute("z-prepend")){var l;(l=document.createElement("div")).innerHTML=t.data[a],n.insertBefore(l,n.firstChild),r=l}else n.innerHTML=t.data[a],t.data[e.target.getAttribute("z-link")]=o}for(var d=n.querySelectorAll("[z-link=master]"),u=0;u<d.length;u++)d[u].setAttribute("z-link",e.target.getAttribute("z-link"))}if(e.target.getAttribute("z-post")){for(s=e.target.getAttribute("z-post").trim();-1!==s.indexOf(" ");)t.data[s.slice(0,s.indexOf(" "))](),s=s.slice(s.indexOf(" ")+1);t.data[s](r,e)}i(),void 0!==t.cycled&&t.cycled(r,e)},i=function(){for(var i=document.querySelectorAll("[z-link], [z-pre], [z-post]"),n=0;n<i.length;n++){var r="click";i[n].getAttribute("z-event")&&(r=i[n].getAttribute("z-event")),t.on(r,i[n],e)}};i()},Zam.prototype.e=function(t){return document.querySelectorAll(t)},Zam.prototype.index=function(t){for(var e=0,i=t;null!=(i=i.previousElementSibling);)i.tagName.toLowerCase()===t.target.tagName.toLowerCase()&&e++;return e},Zam.prototype.unbind=function(t,e,i){if("string"==typeof i&&(i=this.functions[i]),"object"!=typeof e)for(var n=document.querySelectorAll(e),r=n.length,o=0;o<r;o++)n[o].removeEventListener(t,i);else e.removeEventListener(t,i)},Zam.prototype.bind=function(t,e,i){if("string"==typeof i&&(i=this.functions[i]),"object"!=typeof e){for(var n=document.querySelectorAll(e),r=n.length,o=0;o<r;o++)n[o].addEventListener(t,i);"anonymous"!==i.name&&(this.functions[i.name]=i)}else e.addEventListener(t,i),"anonymous"!==i.name&&(this.functions[i.name]=i)},Zam.prototype.on=function(t,e,i){if(-1!==t.indexOf(" ")){for(var n=t;-1!==n.indexOf(" ");)this.bind(n.slice(0,n.indexOf(" ")),e,i),n=n.slice(n.indexOf(" ")+1);this.bind(n,e,i)}else this.bind(t,e,i)},Zam.prototype.off=function(t,e,i){if(-1!==t.indexOf(" ")){for(var n=t;-1!==n.indexOf(" ");)this.unbind(n.slice(0,n.indexOf(" ")),e,i),n=n.slice(n.indexOf(" ")+1);this.unbind(n,e,i)}else this.unbind(t,e,i)},Zam.prototype.cssSelector=function(t,e){for(var i=document.querySelectorAll(e),n=i.length,r=0;r<n;r++)this.cssObject(t,i[r])},Zam.prototype.cssAddValue=function(t,e,i){var n,r=i.slice(0,i.indexOf(" "));if(null===(n=t.style[e].match(new RegExp(`(^${r}|, ${r})`,"g"))))t.style[e]+=","+i;else{var o=t.style[e].indexOf(n[0]);n[0].indexOf(",")>-1&&(o+=2);var s=t.style[e].slice(0,o),a=i,l="";-1!==t.style[e].slice(o).indexOf(",")&&(l=t.style[e].slice(t.style[e].slice(o).indexOf(","))),t.style[e]=s+a+l}},Zam.prototype.cssObject=function(t,e){for(var i in t)if(t.hasOwnProperty(i))if(-1!==i.indexOf("-")){var n=t[i],r=i.indexOf("-")+1;i=i.slice(0,r-1)+i[r].toUpperCase()+i.slice(r+1),e.style[i]=n}else if("transition"===i||"animation"===i)if(""===t[i]||""===e.style[i])e.style[i]=t[i];else{for(var o=t[i],s="";-1!==o.indexOf(",");)s=o.slice(0,o.indexOf(",")).trim(),this.cssAddValue(e,i,s),o=o.slice(o.indexOf(",")+1).trim();this.cssAddValue(e,i,o)}else e.style[i]=t[i]},Zam.prototype.css=function(t,e){"object"==typeof e?this.cssObject(t,e):this.cssSelector(t,e)},Zam.prototype.each=function(t,e){var i=document.querySelectorAll(t);Array.prototype.forEach.call(i,function(t,i){e(t,i)})},Zam.prototype.addStyle=function(t,e){var i=document.createElement("style");i.innerHTML=e,i.id=t,document.getElementsByTagName("head")[0].appendChild(i)},Zam.prototype.removeStyle=function(t){var e=document.querySelector("#"+t);e.parentNode.removeChild(e)},Zam.prototype.html=function(t,e){if(t=t.replace(/(?:\r\n|\r|\n)/g,""),"object"==typeof e)e.innerHTML=t;else for(var i=document.querySelectorAll(e),n=i.length,r=0;r<n;r++)i[r].innerHTML=t},Zam.prototype.updateURL=function(t){history.pushState&&window.history.pushState({path:t},"",t)},Zam.prototype.setContent=function(){if(window.location.href.lastIndexOf("/")!==window.location.href.length-1)for(var t in this.routes)-1!==window.location.href.indexOf("/"+this.routes[t].view.slice(1))?this.css({display:this.routes[t].display},this.routes[t].view):this.css({display:"none"},this.routes[t].view);else for(var t in this.routes){this.css({display:this.routes[t].display},this.routes[t].view);break}},Zam.prototype.router=function(t){this.routes=JSON.parse(JSON.stringify(t)),this.setContent(),this.on("popstate",window,()=>{this.setContent()});for(var e in this.routes){var i="click";void 0!==e.event&&(i=e.event),this.on(i,"#"+e,t=>{this.updateURL("/"+this.routes[t.target.id].view.slice(1)),this.setContent()})}},Zam.prototype.ajax=function(t){return void 0===t.method&&(t.method="GET"),void 0===t.data&&(t.data=null),void 0===t.headers&&(t.headers={Accept:"application/json"}),new Promise(function(e,i){var n=new XMLHttpRequest;n.open(t.method,t.url,!0);for(var r in t.headers)t.headers.hasOwnProperty(r)&&n.setRequestHeader(r,t.headers[r]);n.onload=function(r){200===n.status?"appliction/json"===t.headers.Accept?e(JSON.parse(n.responseText)):e(n.responseText):i(Error("ajax failed - error code:"+n.statusText))},n.onerror=function(t){i(Error("ajax failed - error code:"+n.statusText))},n.send(t.data)})};export default Zam;