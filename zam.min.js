export default function Zam(){};Zam.idCounter=0,Zam.routes={},Zam.getId=function(){return Zam.idCounter++},Zam.component=function(){this.id="a"+Zam.getId(),this.childrenCount=0,this.children={},this.setHTML=function(e){var t=document.createElement("div");t.id=this.id,t.innerHTML=e,this.anchor=t,this.html=this.anchor.outerHTML}.bind(this),this.cache=function(e,t){return t?(this.children[t]=e,e):this.children[e]}.bind(this),this.mount=function(){this.anchor=document.getElementById(this.id),this.html=this.anchor.outerHTML;for(var e in this.children)null!==document.getElementById(this.children[e].id)?this.children[e].mount():delete this.children[e];this.mounted()}.bind(this)},Zam.on=function(e,t,i){var n=function(e,t,i){if("object"!=typeof t)for(var n=document.querySelectorAll(t),s=n.length,r=0;r<s;r++)n[r].addEventListener(e,i);else t.addEventListener(e,i)};if(-1!==e.indexOf(" ")){for(var s=e;-1!==s.indexOf(" ");)n(s.slice(0,s.indexOf(" ")),t,i),s=s.slice(s.indexOf(" ")+1);n(s,t,i)}else n(e,t,i)},Zam.off=function(e,t,i){var n=function(e,t,i){if("object"!=typeof t)for(var n=document.querySelectorAll(t),s=n.length,r=0;r<s;r++)n[r].removeEventListener(e,i);else t.removeEventListener(e,i)};if(-1!==e.indexOf(" ")){for(var s=e;-1!==s.indexOf(" ");)n(s.slice(0,s.indexOf(" ")),t,i),s=s.slice(s.indexOf(" ")+1);n(s,t,i)}else n(e,t,i)},Zam.css=function(e,t){var i=function(e,t,i){var n,s=i.slice(0,i.indexOf(" "));if(null===(n=e.style[t].match(new RegExp(`(^${s}|, ${s})`,"g"))))e.style[t]+=","+i;else{var r=e.style[t].indexOf(n[0]);n[0].indexOf(",")>-1&&(r+=2);var o=e.style[t].slice(0,r),a=i,d="";-1!==e.style[t].slice(r).indexOf(",")&&(d=e.style[t].slice(e.style[t].slice(r).indexOf(","))),e.style[t]=o+a+d}},n=function(e,t){for(var n in e)if(e.hasOwnProperty(n))if(-1!==n.indexOf("-")){var s=e[n],r=n.indexOf("-")+1;n=n.slice(0,r-1)+n[r].toUpperCase()+n.slice(r+1),t.style[n]=s}else if("transition"===n||"animation"===n)if(""===e[n]||""===t.style[n])t.style[n]=e[n];else{for(var o=e[n],a="";-1!==o.indexOf(",");)a=o.slice(0,o.indexOf(",")).trim(),i(t,n,a),o=o.slice(o.indexOf(",")+1).trim();i(t,n,o)}else t.style[n]=e[n]};"object"==typeof t?n(e,t):function(e,t){for(var i=document.querySelectorAll(t),s=i.length,r=0;r<s;r++)n(e,i[r])}(e,t)},Zam.router=function(e){this.routes={};var t=function(e){history.pushState&&window.history.pushState({path:e},"",e)},i=function(){if(window.location.href.lastIndexOf("/")!==window.location.href.length-1)for(var e in this.routes)-1!==window.location.href.indexOf("/"+this.routes[e].view.slice(1))?Zam.css({display:this.routes[e].display},this.routes[e].view):Zam.css({display:"none"},this.routes[e].view);else for(var e in this.routes){Zam.css({display:this.routes[e].display},this.routes[e].view);break}}.bind(this);this.routes=JSON.parse(JSON.stringify(e)),i(),Zam.on("popstate",window,()=>{i()});for(var n in this.routes){var s="click";void 0!==n.event&&(s=n.event),Zam.on(s,"#"+n,e=>{t("/"+this.routes[e.target.id].view.slice(1)),i()})}},Zam.ajax=function(e){return void 0===e.method&&(e.method="GET"),void 0===e.data&&(e.data=null),void 0===e.headers&&(e.headers={Accept:"application/json"}),new Promise(function(t,i){var n=new XMLHttpRequest;n.open(e.method,e.url,!0);for(var s in e.headers)e.headers.hasOwnProperty(s)&&n.setRequestHeader(s,e.headers[s]);n.onload=function(s){200===n.status?"appliction/json"===e.headers.Accept?t(JSON.parse(n.responseText)):t(n.responseText):i(Error("ajax failed - error code:"+n.statusText))},n.onerror=function(e){i(Error("ajax failed - error code:"+n.statusText))},n.send(e.data)})};