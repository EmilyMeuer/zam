function Zam(t,e){this.functions={},this.routes={},this.components=[],this.data=void 0===t?{}:t,this.ran=e,this.runEngine()}Zam.prototype.runEngine=function(){var t=this,e=function(e){var i=document.querySelectorAll("#"+e.target.getAttribute("z:link"))[0],o=i.innerHTML;if(i.getAttribute("z:data").indexOf("}}")>-1)if(void 0!==t.data[e.target.getAttribute("z:link")])i.innerHTML=t.data[e.target.getAttribute("z:link")],t.data[e.target.getAttribute("z:link")]=o;else{var r=i.getAttribute("z:data").slice(2,i.getAttribute("z:data").indexOf("}}"));i.innerHTML=t.data[r],t.data[e.target.getAttribute("z:link")]=o}else i.innerHTML=i.getAttribute("z:data"),i.setAttribute("z:data",o);for(var s=i.querySelectorAll("*"),a=0;a<s.length;a++)"master"===s[a].getAttribute("z:link")&&s[a].setAttribute("z:link",e.target.getAttribute("z:link"));n(),void 0!==t.ran&&t.ran(e)},n=function(){for(var n=document.querySelectorAll("*"),i=0;i<n.length;i++)if(n[i].getAttribute("z:link")){var o="click";n[i].getAttribute("z:event")&&(o=n[i].getAttribute("z:event")),t.on(o,n[i],e)}};n()},Zam.prototype.e=function(t){return document.querySelectorAll(t)},Zam.prototype.index=function(t){for(var e=0,n=t;null!=(n=n.previousElementSibling);)n.tagName.toLowerCase()===t.target.tagName.toLowerCase()&&e++;return e},Zam.prototype.unbind=function(t,e,n){if("string"==typeof n&&(n=this.functions[n]),"object"!=typeof e)for(var i=document.querySelectorAll(e),o=i.length,r=0;r<o;r++)i[r].removeEventListener(t,n);else e.removeEventListener(t,n)},Zam.prototype.bind=function(t,e,n){if("string"==typeof n&&(n=this.functions[n]),"object"!=typeof e){for(var i=document.querySelectorAll(e),o=i.length,r=0;r<o;r++)i[r].addEventListener(t,n);"anonymous"!==n.name&&(this.functions[n.name]=n)}else e.addEventListener(t,n),"anonymous"!==n.name&&(this.functions[n.name]=n)},Zam.prototype.on=function(t,e,n){if(-1!==t.indexOf(" ")){for(var i=t;-1!==i.indexOf(" ");)this.bind(i.slice(0,i.indexOf(" ")),e,n),i=i.slice(i.indexOf(" ")+1);this.bind(i,e,n)}else this.bind(t,e,n)},Zam.prototype.off=function(t,e,n){if(-1!==t.indexOf(" ")){for(var i=t;-1!==i.indexOf(" ");)this.unbind(i.slice(0,i.indexOf(" ")),e,n),i=i.slice(i.indexOf(" ")+1);this.unbind(i,e,n)}else this.unbind(t,e,n)},Zam.prototype.cssSelector=function(t,e){for(var n=document.querySelectorAll(e),i=n.length,o=0;o<i;o++)this.cssObject(t,n[o])},Zam.prototype.cssAddValue=function(t,e,n){var i,o=n.slice(0,n.indexOf(" "));if(null===(i=t.style[e].match(new RegExp(`(^${o}|, ${o})`,"g"))))t.style[e]+=","+n;else{var r=t.style[e].indexOf(i[0]);i[0].indexOf(",")>-1&&(r+=2);var s=t.style[e].slice(0,r),a=n,l="";-1!==t.style[e].slice(r).indexOf(",")&&(l=t.style[e].slice(t.style[e].slice(r).indexOf(","))),t.style[e]=s+a+l}},Zam.prototype.cssObject=function(t,e){for(var n in t)if(t.hasOwnProperty(n))if(-1!==n.indexOf("-")){var i=t[n],o=n.indexOf("-")+1;n=n.slice(0,o-1)+n[o].toUpperCase()+n.slice(o+1),e.style[n]=i}else if("transition"===n||"animation"===n)if(""===t[n]||""===e.style[n])e.style[n]=t[n];else{for(var r=t[n],s="";-1!==r.indexOf(",");)s=r.slice(0,r.indexOf(",")).trim(),this.cssAddValue(e,n,s),r=r.slice(r.indexOf(",")+1).trim();this.cssAddValue(e,n,r)}else e.style[n]=t[n]},Zam.prototype.css=function(t,e){"object"==typeof e?this.cssObject(t,e):this.cssSelector(t,e)},Zam.prototype.each=function(t,e){var n=document.querySelectorAll(t);Array.prototype.forEach.call(n,function(t,n){e(t,n)})},Zam.prototype.addStyle=function(t,e){var n=document.createElement("style");n.innerHTML=e,n.id=t,document.getElementsByTagName("head")[0].appendChild(n)},Zam.prototype.removeStyle=function(t){var e=document.querySelector("#"+t);e.parentNode.removeChild(e)},Zam.prototype.html=function(t,e){if(t=t.replace(/(?:\r\n|\r|\n)/g,""),"object"==typeof e)e.innerHTML=t;else for(var n=document.querySelectorAll(e),i=n.length,o=0;o<i;o++)n[o].innerHTML=t},Zam.prototype.updateURL=function(t){history.pushState&&window.history.pushState({path:t},"",t)},Zam.prototype.setContent=function(){if(window.location.href.lastIndexOf("/")!==window.location.href.length-1)for(var t in this.routes)-1!==window.location.href.indexOf("/"+this.routes[t].view.slice(1))?this.css({display:this.routes[t].display},this.routes[t].view):this.css({display:"none"},this.routes[t].view);else for(var t in this.routes){this.css({display:this.routes[t].display},this.routes[t].view);break}},Zam.prototype.router=function(t){this.routes=JSON.parse(JSON.stringify(t)),this.setContent(),this.on("popstate",window,()=>{this.setContent()});for(var e in this.routes){var n="click";void 0!==e.event&&(n=e.event),this.on(n,"#"+e,t=>{this.updateURL("/"+this.routes[t.target.id].view.slice(1)),this.setContent()})}},Zam.prototype.ajax=function(t){return void 0===t.method&&(t.method="GET"),void 0===t.data&&(t.data=null),void 0===t.headers&&(t.headers={Accept:"application/json"}),new Promise(function(e,n){var i=new XMLHttpRequest;i.open(t.method,t.url,!0);for(var o in t.headers)t.headers.hasOwnProperty(o)&&i.setRequestHeader(o,t.headers[o]);i.onload=function(o){200===i.status?"appliction/json"===t.headers.Accept?e(JSON.parse(i.responseText)):e(i.responseText):n(Error("ajax failed - error code:"+i.statusText))},i.onerror=function(t){n(Error("ajax failed - error code:"+i.statusText))},i.send(t.data)})};